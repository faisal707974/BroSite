{"ast":null,"code":"import axios from 'axios';\nimport { USER_REGISTER_FAIL, USER_REGISTER_REQUEST, USER_REGISTER_SUCCESS } from \"../constants/registerConstant\";\nexport const registeration = (data, toggleModal) => async (dispatch, getstate) => {\n  console.log({\n    data\n  });\n  dispatch({\n    type: USER_REGISTER_REQUEST\n  });\n  const base64 = data.photo;\n  fetch(base64).then(res => {\n    res.blob();\n  }).then(blob => {\n    const fd = new FormData();\n    const file = new File([blob], data.Name + \".jpeg\", {\n      type: 'image/jpeg'\n    });\n    console.log(file);\n    fd.append('file', file);\n    fd.append('upload_preset', 'gchysefv');\n    fd.append(\"cloud_name\", \"dj4qzfqjg\");\n    fd.append('resource_type', 'auto');\n    const API_URL = 'https://api.cloudinary.com/v1_1/dj4qzfqjg/image/upload';\n    fetch(API_URL, {\n      method: 'POST',\n      body: fd\n    }).then(res => res.json()).then(res => {\n      console.log({\n        res\n      });\n      data.photo = res;\n    }).catch(error => {\n      console.log(error);\n    });\n    const data = new FormData();\n    data.append(\"file\", e.target.files[0]);\n    data.append(\"cloud_name\", \"dj4qzfqjg\");\n    data.append('upload_preset', 'gchysefv');\n    fetch(\"https://api.cloudinary.com/v1_1/dj4qzfqjg/image/upload\", {\n      method: \"post\",\n      body: data\n    }).then(res => res.json()).then(data => {\n      // setPic(data.url.toString());\n      console.log(data);\n    }).catch(err => {\n      console.log(err);\n    });\n  });\n\n  try {\n    const config = {\n      headers: {\n        'Content-Type': 'applicatoin/json'\n      }\n    };\n    const {\n      response\n    } = await axios.post('http://localhost:3001/registration', data);\n    dispatch({\n      type: USER_REGISTER_SUCCESS,\n      payload: response\n    });\n    toggleModal();\n  } catch (error) {\n    dispatch({\n      type: USER_REGISTER_FAIL,\n      payload: error.response ? error.response : error.message\n    });\n  }\n};","map":{"version":3,"sources":["D:/Project 2/frontend/src/redux/actions/registerAction.js"],"names":["axios","USER_REGISTER_FAIL","USER_REGISTER_REQUEST","USER_REGISTER_SUCCESS","registeration","data","toggleModal","dispatch","getstate","console","log","type","base64","photo","fetch","then","res","blob","fd","FormData","file","File","Name","append","API_URL","method","body","json","catch","error","e","target","files","err","config","headers","response","post","payload","message"],"mappings":"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","sourcesContent":["import axios from 'axios'\r\nimport { USER_REGISTER_FAIL, USER_REGISTER_REQUEST, USER_REGISTER_SUCCESS } from \"../constants/registerConstant\"\r\n\r\nexport const registeration = (data, toggleModal) => async (dispatch, getstate) => {\r\n    console.log({ data })\r\n    dispatch({ type: USER_REGISTER_REQUEST })\r\n\r\n\r\n    const base64 = data.photo\r\n    fetch(base64)\r\n        .then(res => {\r\n            res.blob()\r\n        })\r\n        .then(blob => {\r\n            const fd = new FormData();\r\n            const file = new File([blob], data.Name + \".jpeg\", { type: 'image/jpeg' });\r\n            console.log(file)\r\n            fd.append('file', file)\r\n            fd.append('upload_preset', 'gchysefv')\r\n            fd.append(\"cloud_name\", \"dj4qzfqjg\");\r\n            fd.append('resource_type', 'auto')\r\n            const API_URL = 'https://api.cloudinary.com/v1_1/dj4qzfqjg/image/upload'\r\n            fetch(API_URL, { method: 'POST', body: fd })\r\n                .then(res => res.json())\r\n                .then(res => {\r\n                    console.log({ res })\r\n                    data.photo = res\r\n                }).catch((error) => {\r\n                    console.log(error)\r\n                })\r\n\r\n\r\n\r\n\r\n                const data = new FormData();\r\n                data.append(\"file\", e.target.files[0]);\r\n                data.append(\"cloud_name\", \"dj4qzfqjg\");\r\n                data.append('upload_preset', 'gchysefv')\r\n                fetch(\"https://api.cloudinary.com/v1_1/dj4qzfqjg/image/upload\", {\r\n                    method: \"post\",\r\n                    body: data,\r\n                })\r\n                    .then((res) => res.json())\r\n                    .then((data) => {\r\n                        // setPic(data.url.toString());\r\n                        console.log(data)\r\n                    })\r\n                    .catch((err) => {\r\n                        console.log(err);\r\n                    });\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n        })\r\n\r\n\r\n\r\n    try {\r\n        const config = { headers: { 'Content-Type': 'applicatoin/json' } }\r\n        const { response } = await axios.post('http://localhost:3001/registration', data)\r\n\r\n        dispatch({ type: USER_REGISTER_SUCCESS, payload: response })\r\n        toggleModal()\r\n    } catch (error) {\r\n        dispatch({\r\n            type: USER_REGISTER_FAIL, payload:\r\n                error.response ? error.response : error.message\r\n        })\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}