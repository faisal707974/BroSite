{"ast":null,"code":"\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar PropTypes = require(\"prop-types\");\n\nvar React = require(\"react\");\n\nvar split_1 = require(\"./split\");\n\nvar DiffMatchPatch = require(\"diff-match-patch\");\n\nvar DiffComponent =\n/** @class */\nfunction (_super) {\n  __extends(DiffComponent, _super);\n\n  function DiffComponent(props) {\n    var _this = _super.call(this, props) || this;\n\n    _this.state = {\n      value: _this.props.value\n    };\n    _this.onChange = _this.onChange.bind(_this);\n    _this.diff = _this.diff.bind(_this);\n    return _this;\n  }\n\n  DiffComponent.prototype.componentDidUpdate = function () {\n    var value = this.props.value;\n\n    if (value !== this.state.value) {\n      this.setState({\n        value: value\n      });\n    }\n  };\n\n  DiffComponent.prototype.onChange = function (value) {\n    this.setState({\n      value: value\n    });\n\n    if (this.props.onChange) {\n      this.props.onChange(value);\n    }\n  };\n\n  DiffComponent.prototype.diff = function () {\n    var dmp = new DiffMatchPatch();\n    var lhString = this.state.value[0];\n    var rhString = this.state.value[1];\n\n    if (lhString.length === 0 && rhString.length === 0) {\n      return [];\n    }\n\n    var diff = dmp.diff_main(lhString, rhString);\n    dmp.diff_cleanupSemantic(diff);\n    var diffedLines = this.generateDiffedLines(diff);\n    var codeEditorSettings = this.setCodeMarkers(diffedLines);\n    return codeEditorSettings;\n  };\n\n  DiffComponent.prototype.generateDiffedLines = function (diff) {\n    var C = {\n      DIFF_EQUAL: 0,\n      DIFF_DELETE: -1,\n      DIFF_INSERT: 1\n    };\n    var diffedLines = {\n      left: [],\n      right: []\n    };\n    var cursor = {\n      left: 1,\n      right: 1\n    };\n    diff.forEach(function (chunk) {\n      var chunkType = chunk[0];\n      var text = chunk[1];\n      var lines = text.split(\"\\n\").length - 1; // diff-match-patch sometimes returns empty strings at random\n\n      if (text.length === 0) {\n        return;\n      }\n\n      var firstChar = text[0];\n      var lastChar = text[text.length - 1];\n      var linesToHighlight = 0;\n\n      switch (chunkType) {\n        case C.DIFF_EQUAL:\n          cursor.left += lines;\n          cursor.right += lines;\n          break;\n\n        case C.DIFF_DELETE:\n          // If the deletion starts with a newline, push the cursor down to that line\n          if (firstChar === \"\\n\") {\n            cursor.left++;\n            lines--;\n          }\n\n          linesToHighlight = lines; // If the deletion does not include a newline, highlight the same line on the right\n\n          if (linesToHighlight === 0) {\n            diffedLines.right.push({\n              startLine: cursor.right,\n              endLine: cursor.right\n            });\n          } // If the last character is a newline, we don't want to highlight that line\n\n\n          if (lastChar === \"\\n\") {\n            linesToHighlight -= 1;\n          }\n\n          diffedLines.left.push({\n            startLine: cursor.left,\n            endLine: cursor.left + linesToHighlight\n          });\n          cursor.left += lines;\n          break;\n\n        case C.DIFF_INSERT:\n          // If the insertion starts with a newline, push the cursor down to that line\n          if (firstChar === \"\\n\") {\n            cursor.right++;\n            lines--;\n          }\n\n          linesToHighlight = lines; // If the insertion does not include a newline, highlight the same line on the left\n\n          if (linesToHighlight === 0) {\n            diffedLines.left.push({\n              startLine: cursor.left,\n              endLine: cursor.left\n            });\n          } // If the last character is a newline, we don't want to highlight that line\n\n\n          if (lastChar === \"\\n\") {\n            linesToHighlight -= 1;\n          }\n\n          diffedLines.right.push({\n            startLine: cursor.right,\n            endLine: cursor.right + linesToHighlight\n          });\n          cursor.right += lines;\n          break;\n\n        default:\n          throw new Error(\"Diff type was not defined.\");\n      }\n    });\n    return diffedLines;\n  }; // Receives a collection of line numbers and iterates through them to highlight appropriately\n  // Returns an object that tells the render() method how to display the code editors\n\n\n  DiffComponent.prototype.setCodeMarkers = function (diffedLines) {\n    if (diffedLines === void 0) {\n      diffedLines = {\n        left: [],\n        right: []\n      };\n    }\n\n    var codeEditorSettings = [];\n    var newMarkerSet = {\n      left: [],\n      right: []\n    };\n\n    for (var i = 0; i < diffedLines.left.length; i++) {\n      var markerObj = {\n        startRow: diffedLines.left[i].startLine - 1,\n        endRow: diffedLines.left[i].endLine,\n        type: \"text\",\n        className: \"codeMarker\"\n      };\n      newMarkerSet.left.push(markerObj);\n    }\n\n    for (var i = 0; i < diffedLines.right.length; i++) {\n      var markerObj = {\n        startRow: diffedLines.right[i].startLine - 1,\n        endRow: diffedLines.right[i].endLine,\n        type: \"text\",\n        className: \"codeMarker\"\n      };\n      newMarkerSet.right.push(markerObj);\n    }\n\n    codeEditorSettings[0] = newMarkerSet.left;\n    codeEditorSettings[1] = newMarkerSet.right;\n    return codeEditorSettings;\n  };\n\n  DiffComponent.prototype.render = function () {\n    var markers = this.diff();\n    return React.createElement(split_1.default, {\n      name: this.props.name,\n      className: this.props.className,\n      focus: this.props.focus,\n      orientation: this.props.orientation,\n      splits: this.props.splits,\n      mode: this.props.mode,\n      theme: this.props.theme,\n      height: this.props.height,\n      width: this.props.width,\n      fontSize: this.props.fontSize,\n      showGutter: this.props.showGutter,\n      onChange: this.onChange,\n      onPaste: this.props.onPaste,\n      onLoad: this.props.onLoad,\n      onScroll: this.props.onScroll,\n      minLines: this.props.minLines,\n      maxLines: this.props.maxLines,\n      readOnly: this.props.readOnly,\n      highlightActiveLine: this.props.highlightActiveLine,\n      showPrintMargin: this.props.showPrintMargin,\n      tabSize: this.props.tabSize,\n      cursorStart: this.props.cursorStart,\n      editorProps: this.props.editorProps,\n      style: this.props.style,\n      scrollMargin: this.props.scrollMargin,\n      setOptions: this.props.setOptions,\n      wrapEnabled: this.props.wrapEnabled,\n      enableBasicAutocompletion: this.props.enableBasicAutocompletion,\n      enableLiveAutocompletion: this.props.enableLiveAutocompletion,\n      value: this.state.value,\n      markers: markers\n    });\n  };\n\n  DiffComponent.propTypes = {\n    cursorStart: PropTypes.number,\n    editorProps: PropTypes.object,\n    enableBasicAutocompletion: PropTypes.bool,\n    enableLiveAutocompletion: PropTypes.bool,\n    focus: PropTypes.bool,\n    fontSize: PropTypes.number,\n    height: PropTypes.string,\n    highlightActiveLine: PropTypes.bool,\n    maxLines: PropTypes.number,\n    minLines: PropTypes.number,\n    mode: PropTypes.string,\n    name: PropTypes.string,\n    className: PropTypes.string,\n    onLoad: PropTypes.func,\n    onPaste: PropTypes.func,\n    onScroll: PropTypes.func,\n    onChange: PropTypes.func,\n    orientation: PropTypes.string,\n    readOnly: PropTypes.bool,\n    scrollMargin: PropTypes.array,\n    setOptions: PropTypes.object,\n    showGutter: PropTypes.bool,\n    showPrintMargin: PropTypes.bool,\n    splits: PropTypes.number,\n    style: PropTypes.object,\n    tabSize: PropTypes.number,\n    theme: PropTypes.string,\n    value: PropTypes.array,\n    width: PropTypes.string,\n    wrapEnabled: PropTypes.bool\n  };\n  DiffComponent.defaultProps = {\n    cursorStart: 1,\n    editorProps: {},\n    enableBasicAutocompletion: false,\n    enableLiveAutocompletion: false,\n    focus: false,\n    fontSize: 12,\n    height: \"500px\",\n    highlightActiveLine: true,\n    maxLines: null,\n    minLines: null,\n    mode: \"\",\n    name: \"ace-editor\",\n    onLoad: null,\n    onScroll: null,\n    onPaste: null,\n    onChange: null,\n    orientation: \"beside\",\n    readOnly: false,\n    scrollMargin: [0, 0, 0, 0],\n    setOptions: {},\n    showGutter: true,\n    showPrintMargin: true,\n    splits: 2,\n    style: {},\n    tabSize: 4,\n    theme: \"github\",\n    value: [\"\", \"\"],\n    width: \"500px\",\n    wrapEnabled: true\n  };\n  return DiffComponent;\n}(React.Component);\n\nexports.default = DiffComponent;","map":{"version":3,"mappings":"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","names":["DiffMatchPatch","require","__extends","props","_super","_this","state","value","onChange","bind","diff","DiffComponent","setState","dmp","lhString","rhString","length","diff_main","diff_cleanupSemantic","diffedLines","generateDiffedLines","codeEditorSettings","setCodeMarkers","C","DIFF_EQUAL","DIFF_DELETE","DIFF_INSERT","left","right","cursor","forEach","chunk","chunkType","text","lines","split","firstChar","lastChar","linesToHighlight","push","startLine","endLine","Error","newMarkerSet","i","markerObj","startRow","endRow","type","className","markers","React","split_1","name","focus","orientation","splits","mode","theme","height","width","fontSize","showGutter","onPaste","onLoad","onScroll","minLines","maxLines","readOnly","highlightActiveLine","showPrintMargin","tabSize","cursorStart","editorProps","style","scrollMargin","setOptions","wrapEnabled","enableBasicAutocompletion","enableLiveAutocompletion","PropTypes","number","object","bool","string","func","array","Component"],"sources":["D:\\Project 2\\frontend\\node_modules\\react-ace\\src\\diff.tsx"],"sourcesContent":["import * as PropTypes from \"prop-types\";\nimport * as React from \"react\";\nimport SplitEditor from \"./split\";\nconst DiffMatchPatch = require(\"diff-match-patch\");\nimport { IEditorProps } from \"./types\";\n\nexport interface IDiffEditorProps {\n  cursorStart?: number;\n  editorProps?: object;\n  enableBasicAutocompletion?: boolean | string[];\n  enableLiveAutocompletion?: boolean | string[];\n  focus?: boolean;\n  fontSize?: number;\n  height?: string;\n  highlightActiveLine?: boolean;\n  maxLines?: number;\n  minLines?: number;\n  mode?: string;\n  name?: string;\n  className?: string;\n  onLoad?: (editor: IEditorProps) => void;\n  onChange?: (value: string[], event?: any) => void;\n  onPaste?: (value: string) => void;\n  onScroll?: (editor: IEditorProps) => void;\n  orientation?: string;\n  readOnly?: boolean;\n  scrollMargin?: number[];\n  setOptions?: object;\n  showGutter?: boolean;\n  showPrintMargin?: boolean;\n  splits?: number;\n  style?: object;\n  tabSize?: number;\n  theme?: string;\n  value?: string[];\n  width?: string;\n  wrapEnabled?: boolean;\n}\n\nexport interface IDiffEditorState {\n  value: string[];\n}\n\nexport default class DiffComponent extends React.Component<\n  IDiffEditorProps,\n  IDiffEditorState\n> {\n  public static propTypes: PropTypes.ValidationMap<IDiffEditorProps> = {\n    cursorStart: PropTypes.number,\n    editorProps: PropTypes.object,\n    enableBasicAutocompletion: PropTypes.bool,\n    enableLiveAutocompletion: PropTypes.bool,\n    focus: PropTypes.bool,\n    fontSize: PropTypes.number,\n    height: PropTypes.string,\n    highlightActiveLine: PropTypes.bool,\n    maxLines: PropTypes.number,\n    minLines: PropTypes.number,\n    mode: PropTypes.string,\n    name: PropTypes.string,\n    className: PropTypes.string,\n    onLoad: PropTypes.func,\n    onPaste: PropTypes.func,\n    onScroll: PropTypes.func,\n    onChange: PropTypes.func,\n    orientation: PropTypes.string,\n    readOnly: PropTypes.bool,\n    scrollMargin: PropTypes.array,\n    setOptions: PropTypes.object,\n    showGutter: PropTypes.bool,\n    showPrintMargin: PropTypes.bool,\n    splits: PropTypes.number,\n    style: PropTypes.object,\n    tabSize: PropTypes.number,\n    theme: PropTypes.string,\n    value: PropTypes.array,\n    width: PropTypes.string,\n    wrapEnabled: PropTypes.bool\n  };\n\n  public static defaultProps: Partial<IDiffEditorProps> = {\n    cursorStart: 1,\n    editorProps: {},\n    enableBasicAutocompletion: false,\n    enableLiveAutocompletion: false,\n    focus: false,\n    fontSize: 12,\n    height: \"500px\",\n    highlightActiveLine: true,\n    maxLines: null,\n    minLines: null,\n    mode: \"\",\n    name: \"ace-editor\",\n    onLoad: null,\n    onScroll: null,\n    onPaste: null,\n    onChange: null,\n    orientation: \"beside\",\n    readOnly: false,\n    scrollMargin: [0, 0, 0, 0],\n    setOptions: {},\n    showGutter: true,\n    showPrintMargin: true,\n    splits: 2,\n    style: {},\n    tabSize: 4,\n    theme: \"github\",\n    value: [\"\", \"\"],\n    width: \"500px\",\n    wrapEnabled: true\n  };\n  constructor(props: IDiffEditorProps) {\n    super(props);\n    this.state = {\n      value: this.props.value\n    };\n    this.onChange = this.onChange.bind(this);\n    this.diff = this.diff.bind(this);\n  }\n\n  public componentDidUpdate() {\n    const { value } = this.props;\n\n    if (value !== this.state.value) {\n      this.setState({ value });\n    }\n  }\n\n  public onChange(value: any) {\n    this.setState({\n      value\n    });\n    if (this.props.onChange) {\n      this.props.onChange(value);\n    }\n  }\n\n  public diff() {\n    const dmp = new DiffMatchPatch();\n    const lhString = this.state.value[0];\n    const rhString = this.state.value[1];\n\n    if (lhString.length === 0 && rhString.length === 0) {\n      return [];\n    }\n\n    const diff = dmp.diff_main(lhString, rhString);\n    dmp.diff_cleanupSemantic(diff);\n\n    const diffedLines = this.generateDiffedLines(diff);\n    const codeEditorSettings = this.setCodeMarkers(diffedLines);\n    return codeEditorSettings;\n  }\n\n  public generateDiffedLines(diff: any) {\n    const C = {\n      DIFF_EQUAL: 0,\n      DIFF_DELETE: -1,\n      DIFF_INSERT: 1\n    };\n\n    const diffedLines = {\n      left: [] as any[],\n      right: [] as any[]\n    };\n\n    const cursor = {\n      left: 1,\n      right: 1\n    };\n\n    diff.forEach((chunk: any) => {\n      const chunkType = chunk[0];\n      const text = chunk[1];\n      let lines = text.split(\"\\n\").length - 1;\n\n      // diff-match-patch sometimes returns empty strings at random\n      if (text.length === 0) {\n        return;\n      }\n\n      const firstChar = text[0];\n      const lastChar = text[text.length - 1];\n      let linesToHighlight = 0;\n\n      switch (chunkType) {\n        case C.DIFF_EQUAL:\n          cursor.left += lines;\n          cursor.right += lines;\n\n          break;\n        case C.DIFF_DELETE:\n          // If the deletion starts with a newline, push the cursor down to that line\n          if (firstChar === \"\\n\") {\n            cursor.left++;\n            lines--;\n          }\n\n          linesToHighlight = lines;\n\n          // If the deletion does not include a newline, highlight the same line on the right\n          if (linesToHighlight === 0) {\n            diffedLines.right.push({\n              startLine: cursor.right,\n              endLine: cursor.right\n            });\n          }\n\n          // If the last character is a newline, we don't want to highlight that line\n          if (lastChar === \"\\n\") {\n            linesToHighlight -= 1;\n          }\n\n          diffedLines.left.push({\n            startLine: cursor.left,\n            endLine: cursor.left + linesToHighlight\n          });\n\n          cursor.left += lines;\n          break;\n        case C.DIFF_INSERT:\n          // If the insertion starts with a newline, push the cursor down to that line\n          if (firstChar === \"\\n\") {\n            cursor.right++;\n            lines--;\n          }\n\n          linesToHighlight = lines;\n\n          // If the insertion does not include a newline, highlight the same line on the left\n          if (linesToHighlight === 0) {\n            diffedLines.left.push({\n              startLine: cursor.left,\n              endLine: cursor.left\n            });\n          }\n\n          // If the last character is a newline, we don't want to highlight that line\n          if (lastChar === \"\\n\") {\n            linesToHighlight -= 1;\n          }\n\n          diffedLines.right.push({\n            startLine: cursor.right,\n            endLine: cursor.right + linesToHighlight\n          });\n\n          cursor.right += lines;\n          break;\n        default:\n          throw new Error(\"Diff type was not defined.\");\n      }\n    });\n    return diffedLines;\n  }\n\n  // Receives a collection of line numbers and iterates through them to highlight appropriately\n  // Returns an object that tells the render() method how to display the code editors\n  public setCodeMarkers(diffedLines: any = { left: [], right: [] }) {\n    const codeEditorSettings = [];\n\n    const newMarkerSet = {\n      left: [] as any[],\n      right: [] as any[]\n    };\n\n    for (let i = 0; i < diffedLines.left.length; i++) {\n      const markerObj = {\n        startRow: diffedLines.left[i].startLine - 1,\n        endRow: diffedLines.left[i].endLine,\n        type: \"text\",\n        className: \"codeMarker\"\n      };\n      newMarkerSet.left.push(markerObj);\n    }\n\n    for (let i = 0; i < diffedLines.right.length; i++) {\n      const markerObj = {\n        startRow: diffedLines.right[i].startLine - 1,\n        endRow: diffedLines.right[i].endLine,\n        type: \"text\",\n        className: \"codeMarker\"\n      };\n      newMarkerSet.right.push(markerObj);\n    }\n\n    codeEditorSettings[0] = newMarkerSet.left;\n    codeEditorSettings[1] = newMarkerSet.right;\n\n    return codeEditorSettings;\n  }\n\n  public render() {\n    const markers = this.diff();\n    return (\n      <SplitEditor\n        name={this.props.name}\n        className={this.props.className}\n        focus={this.props.focus}\n        orientation={this.props.orientation}\n        splits={this.props.splits}\n        mode={this.props.mode}\n        theme={this.props.theme}\n        height={this.props.height}\n        width={this.props.width}\n        fontSize={this.props.fontSize}\n        showGutter={this.props.showGutter}\n        onChange={this.onChange}\n        onPaste={this.props.onPaste}\n        onLoad={this.props.onLoad}\n        onScroll={this.props.onScroll}\n        minLines={this.props.minLines}\n        maxLines={this.props.maxLines}\n        readOnly={this.props.readOnly}\n        highlightActiveLine={this.props.highlightActiveLine}\n        showPrintMargin={this.props.showPrintMargin}\n        tabSize={this.props.tabSize}\n        cursorStart={this.props.cursorStart}\n        editorProps={this.props.editorProps}\n        style={this.props.style}\n        scrollMargin={this.props.scrollMargin}\n        setOptions={this.props.setOptions}\n        wrapEnabled={this.props.wrapEnabled}\n        enableBasicAutocompletion={this.props.enableBasicAutocompletion}\n        enableLiveAutocompletion={this.props.enableLiveAutocompletion}\n        value={this.state.value}\n        markers={markers}\n      />\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"script"}