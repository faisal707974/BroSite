{"ast":null,"code":"'use strict';\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nvar api = require('./api');\n\nvar _require = require('../utils'),\n    isEmpty = _require.isEmpty,\n    isNumber = _require.isNumber;\n\nvar Search = function () {\n  function Search() {\n    _classCallCheck(this, Search);\n\n    this.query_hash = {\n      sort_by: [],\n      aggregate: [],\n      with_field: []\n    };\n  }\n\n  _createClass(Search, [{\n    key: 'expression',\n    value: function expression(value) {\n      this.query_hash.expression = value;\n      return this;\n    }\n  }, {\n    key: 'max_results',\n    value: function max_results(value) {\n      this.query_hash.max_results = value;\n      return this;\n    }\n  }, {\n    key: 'next_cursor',\n    value: function next_cursor(value) {\n      this.query_hash.next_cursor = value;\n      return this;\n    }\n  }, {\n    key: 'aggregate',\n    value: function aggregate(value) {\n      var found = this.query_hash.aggregate.find(function (v) {\n        return v === value;\n      });\n\n      if (!found) {\n        this.query_hash.aggregate.push(value);\n      }\n\n      return this;\n    }\n  }, {\n    key: 'with_field',\n    value: function with_field(value) {\n      var found = this.query_hash.with_field.find(function (v) {\n        return v === value;\n      });\n\n      if (!found) {\n        this.query_hash.with_field.push(value);\n      }\n\n      return this;\n    }\n  }, {\n    key: 'sort_by',\n    value: function sort_by(field_name) {\n      var dir = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"desc\";\n      var sort_bucket = void 0;\n      sort_bucket = {};\n      sort_bucket[field_name] = dir; // Check if this field name is already stored in the hash\n\n      var previously_sorted_obj = this.query_hash.sort_by.find(function (sort_by) {\n        return sort_by[field_name];\n      }); // Since objects are references in Javascript, we can update the reference we found\n      // For example,\n\n      if (previously_sorted_obj) {\n        previously_sorted_obj[field_name] = dir;\n      } else {\n        this.query_hash.sort_by.push(sort_bucket);\n      }\n\n      return this;\n    }\n  }, {\n    key: 'to_query',\n    value: function to_query() {\n      var _this = this;\n\n      Object.keys(this.query_hash).forEach(function (k) {\n        var v = _this.query_hash[k];\n\n        if (!isNumber(v) && isEmpty(v)) {\n          delete _this.query_hash[k];\n        }\n      });\n      return this.query_hash;\n    }\n  }, {\n    key: 'execute',\n    value: function execute(options, callback) {\n      if (callback === null) {\n        callback = options;\n      }\n\n      options = options || {};\n      return api.search(this.to_query(), options, callback);\n    }\n  }], [{\n    key: 'instance',\n    value: function instance() {\n      return new Search();\n    }\n  }, {\n    key: 'expression',\n    value: function expression(value) {\n      return this.instance().expression(value);\n    }\n  }, {\n    key: 'max_results',\n    value: function max_results(value) {\n      return this.instance().max_results(value);\n    }\n  }, {\n    key: 'next_cursor',\n    value: function next_cursor(value) {\n      return this.instance().next_cursor(value);\n    }\n  }, {\n    key: 'aggregate',\n    value: function aggregate(value) {\n      return this.instance().aggregate(value);\n    }\n  }, {\n    key: 'with_field',\n    value: function with_field(value) {\n      return this.instance().with_field(value);\n    }\n  }, {\n    key: 'sort_by',\n    value: function sort_by(field_name) {\n      var dir = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'asc';\n      return this.instance().sort_by(field_name, dir);\n    }\n  }]);\n\n  return Search;\n}();\n\nmodule.exports = Search;","map":{"version":3,"sources":["D:/Project 2/frontend/node_modules/cloudinary/lib-es5/v2/search.js"],"names":["_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","Constructor","protoProps","staticProps","prototype","_classCallCheck","instance","TypeError","api","require","_require","isEmpty","isNumber","Search","query_hash","sort_by","aggregate","with_field","value","expression","max_results","next_cursor","found","find","v","push","field_name","dir","arguments","undefined","sort_bucket","previously_sorted_obj","to_query","_this","keys","forEach","k","execute","options","callback","search","module","exports"],"mappings":"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","sourcesContent":["'use strict';\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar api = require('./api');\n\nvar _require = require('../utils'),\n    isEmpty = _require.isEmpty,\n    isNumber = _require.isNumber;\n\nvar Search = function () {\n  function Search() {\n    _classCallCheck(this, Search);\n\n    this.query_hash = {\n      sort_by: [],\n      aggregate: [],\n      with_field: []\n    };\n  }\n\n  _createClass(Search, [{\n    key: 'expression',\n    value: function expression(value) {\n      this.query_hash.expression = value;\n      return this;\n    }\n  }, {\n    key: 'max_results',\n    value: function max_results(value) {\n      this.query_hash.max_results = value;\n      return this;\n    }\n  }, {\n    key: 'next_cursor',\n    value: function next_cursor(value) {\n      this.query_hash.next_cursor = value;\n      return this;\n    }\n  }, {\n    key: 'aggregate',\n    value: function aggregate(value) {\n      var found = this.query_hash.aggregate.find(function (v) {\n        return v === value;\n      });\n\n      if (!found) {\n        this.query_hash.aggregate.push(value);\n      }\n\n      return this;\n    }\n  }, {\n    key: 'with_field',\n    value: function with_field(value) {\n      var found = this.query_hash.with_field.find(function (v) {\n        return v === value;\n      });\n\n      if (!found) {\n        this.query_hash.with_field.push(value);\n      }\n\n      return this;\n    }\n  }, {\n    key: 'sort_by',\n    value: function sort_by(field_name) {\n      var dir = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"desc\";\n\n      var sort_bucket = void 0;\n      sort_bucket = {};\n      sort_bucket[field_name] = dir;\n\n      // Check if this field name is already stored in the hash\n      var previously_sorted_obj = this.query_hash.sort_by.find(function (sort_by) {\n        return sort_by[field_name];\n      });\n\n      // Since objects are references in Javascript, we can update the reference we found\n      // For example,\n      if (previously_sorted_obj) {\n        previously_sorted_obj[field_name] = dir;\n      } else {\n        this.query_hash.sort_by.push(sort_bucket);\n      }\n\n      return this;\n    }\n  }, {\n    key: 'to_query',\n    value: function to_query() {\n      var _this = this;\n\n      Object.keys(this.query_hash).forEach(function (k) {\n        var v = _this.query_hash[k];\n        if (!isNumber(v) && isEmpty(v)) {\n          delete _this.query_hash[k];\n        }\n      });\n      return this.query_hash;\n    }\n  }, {\n    key: 'execute',\n    value: function execute(options, callback) {\n      if (callback === null) {\n        callback = options;\n      }\n      options = options || {};\n      return api.search(this.to_query(), options, callback);\n    }\n  }], [{\n    key: 'instance',\n    value: function instance() {\n      return new Search();\n    }\n  }, {\n    key: 'expression',\n    value: function expression(value) {\n      return this.instance().expression(value);\n    }\n  }, {\n    key: 'max_results',\n    value: function max_results(value) {\n      return this.instance().max_results(value);\n    }\n  }, {\n    key: 'next_cursor',\n    value: function next_cursor(value) {\n      return this.instance().next_cursor(value);\n    }\n  }, {\n    key: 'aggregate',\n    value: function aggregate(value) {\n      return this.instance().aggregate(value);\n    }\n  }, {\n    key: 'with_field',\n    value: function with_field(value) {\n      return this.instance().with_field(value);\n    }\n  }, {\n    key: 'sort_by',\n    value: function sort_by(field_name) {\n      var dir = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'asc';\n\n      return this.instance().sort_by(field_name, dir);\n    }\n  }]);\n\n  return Search;\n}();\n\nmodule.exports = Search;"]},"metadata":{},"sourceType":"script"}