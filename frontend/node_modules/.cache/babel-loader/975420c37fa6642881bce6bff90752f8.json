{"ast":null,"code":"import axios from 'axios';\nimport { USER_REGISTER_FAIL, USER_REGISTER_REQUEST, USER_REGISTER_SUCCESS } from \"../constants/registerConstant\";\nimport cloudinary from 'cloudinary';\nexport const registeration = (data, toggleModal) => async (dispatch, getstate) => {\n  dispatch({\n    type: USER_REGISTER_REQUEST\n  });\n  cloudinary.config({\n    cloud_name: process.env.CLOUDINARY_CLOUD_NAME,\n    api_key: process.env.CLOUDINARY_API_KEY,\n    api_secret: process.env.CLOUDINARY_API_SECR\n  });\n  const base64 = data.photo;\n  console.log(base64); // fetch(base64)\n  //     .then(res => {\n  //         res.blob()\n  //     })\n  //     .then(blob => {\n  //         const file = new File([blob], data.Name + \".jpeg\", { type: 'image/jpeg' });\n  //         const fd = new FormData();\n  //         console.log({file})\n  //         fd.append('file', file)\n  //         fd.append('upload_preset', 'gchysefv')\n  //         fd.append(\"cloud_name\", \"dj4qzfqjg\");\n  //         fd.append('resource_type', 'auto')\n  //         console.log({fd})\n  //         const API_URL = 'https://api.cloudinary.com/v1_1/dj4qzfqjg/image/upload'\n  //         fetch(API_URL, { method: 'POST', body: fd })\n  //             .then(res => res.json())\n  //             .then(res => {\n  //                 console.log({ res })\n  //                 // data.photo = res\n  //             }).catch((error) => {\n  //                 console.log(error)\n  //             })\n  //     })\n\n  try {\n    const config = {\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    };\n    const {\n      response\n    } = await axios.post('http://localhost:3001/registration', data);\n    dispatch({\n      type: USER_REGISTER_SUCCESS,\n      payload: response\n    });\n    toggleModal();\n  } catch (error) {\n    dispatch({\n      type: USER_REGISTER_FAIL,\n      payload: error.response ? error.response : error.message\n    });\n  }\n};","map":{"version":3,"sources":["D:/Project 2/frontend/src/redux/actions/registerAction.js"],"names":["axios","USER_REGISTER_FAIL","USER_REGISTER_REQUEST","USER_REGISTER_SUCCESS","cloudinary","registeration","data","toggleModal","dispatch","getstate","type","config","cloud_name","process","env","CLOUDINARY_CLOUD_NAME","api_key","CLOUDINARY_API_KEY","api_secret","CLOUDINARY_API_SECR","base64","photo","console","log","headers","response","post","payload","error","message"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,kBAAT,EAA6BC,qBAA7B,EAAoDC,qBAApD,QAAiF,+BAAjF;AACA,OAAOC,UAAP,MAAuB,YAAvB;AAGA,OAAO,MAAMC,aAAa,GAAG,CAACC,IAAD,EAAOC,WAAP,KAAuB,OAAOC,QAAP,EAAiBC,QAAjB,KAA8B;AAC9ED,EAAAA,QAAQ,CAAC;AAAEE,IAAAA,IAAI,EAAER;AAAR,GAAD,CAAR;AAGAE,EAAAA,UAAU,CAACO,MAAX,CAAkB;AACdC,IAAAA,UAAU,EAAEC,OAAO,CAACC,GAAR,CAAYC,qBADV;AAEdC,IAAAA,OAAO,EAAEH,OAAO,CAACC,GAAR,CAAYG,kBAFP;AAGdC,IAAAA,UAAU,EAAEL,OAAO,CAACC,GAAR,CAAYK;AAHV,GAAlB;AAMA,QAAMC,MAAM,GAAGd,IAAI,CAACe,KAApB;AACAC,EAAAA,OAAO,CAACC,GAAR,CAAYH,MAAZ,EAX8E,CAc9E;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;;AAEA,MAAI;AACA,UAAMT,MAAM,GAAG;AAAEa,MAAAA,OAAO,EAAE;AAAE,wBAAgB;AAAlB;AAAX,KAAf;AACA,UAAM;AAAEC,MAAAA;AAAF,QAAe,MAAMzB,KAAK,CAAC0B,IAAN,CAAW,oCAAX,EAAiDpB,IAAjD,CAA3B;AAEAE,IAAAA,QAAQ,CAAC;AAAEE,MAAAA,IAAI,EAAEP,qBAAR;AAA+BwB,MAAAA,OAAO,EAAEF;AAAxC,KAAD,CAAR;AACAlB,IAAAA,WAAW;AACd,GAND,CAME,OAAOqB,KAAP,EAAc;AACZpB,IAAAA,QAAQ,CAAC;AACLE,MAAAA,IAAI,EAAET,kBADD;AACqB0B,MAAAA,OAAO,EAC7BC,KAAK,CAACH,QAAN,GAAiBG,KAAK,CAACH,QAAvB,GAAkCG,KAAK,CAACC;AAFvC,KAAD,CAAR;AAIH;AACJ,CApDM","sourcesContent":["import axios from 'axios'\r\nimport { USER_REGISTER_FAIL, USER_REGISTER_REQUEST, USER_REGISTER_SUCCESS } from \"../constants/registerConstant\"\r\nimport cloudinary from 'cloudinary'\r\n\r\n\r\nexport const registeration = (data, toggleModal) => async (dispatch, getstate) => {\r\n    dispatch({ type: USER_REGISTER_REQUEST })\r\n\r\n\r\n    cloudinary.config({\r\n        cloud_name: process.env.CLOUDINARY_CLOUD_NAME,\r\n        api_key: process.env.CLOUDINARY_API_KEY,\r\n        api_secret: process.env.CLOUDINARY_API_SECR,\r\n    })\r\n\r\n    const base64 = data.photo\r\n    console.log(base64)\r\n\r\n\r\n    // fetch(base64)\r\n    //     .then(res => {\r\n    //         res.blob()\r\n    //     })\r\n    //     .then(blob => {\r\n    //         const file = new File([blob], data.Name + \".jpeg\", { type: 'image/jpeg' });\r\n\r\n    //         const fd = new FormData();\r\n    //         console.log({file})\r\n    //         fd.append('file', file)\r\n    //         fd.append('upload_preset', 'gchysefv')\r\n    //         fd.append(\"cloud_name\", \"dj4qzfqjg\");\r\n    //         fd.append('resource_type', 'auto')\r\n    //         console.log({fd})\r\n    //         const API_URL = 'https://api.cloudinary.com/v1_1/dj4qzfqjg/image/upload'\r\n    //         fetch(API_URL, { method: 'POST', body: fd })\r\n    //             .then(res => res.json())\r\n    //             .then(res => {\r\n    //                 console.log({ res })\r\n    //                 // data.photo = res\r\n    //             }).catch((error) => {\r\n    //                 console.log(error)\r\n    //             })\r\n\r\n    //     })\r\n\r\n    try {\r\n        const config = { headers: { 'Content-Type': 'application/json' } }\r\n        const { response } = await axios.post('http://localhost:3001/registration', data)\r\n\r\n        dispatch({ type: USER_REGISTER_SUCCESS, payload: response })\r\n        toggleModal()\r\n    } catch (error) {\r\n        dispatch({\r\n            type: USER_REGISTER_FAIL, payload:\r\n                error.response ? error.response : error.message\r\n        })\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}